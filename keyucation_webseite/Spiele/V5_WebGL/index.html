<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>KeyUcation Generator</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes" />
    <style>
      /* Vollbild, keine Scrollbars, dunkler Hintergrund wie in Datei #1 */
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #231F20;
      }
      #unity-container {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
      }
      #unity-canvas {
        display: block; /* verhindert extra whitespace */
        /* tatsächliche Größe setzen wir per JS in Abhängigkeit von DPR */
      }
      /* optional: Platz für Warnmeldungen (falls benötigt) */
      #unity-warning {
        position: absolute;
        top: 10px; left: 10px; right: 10px;
        z-index: 20;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="unity-container">
      <canvas id="unity-canvas" tabindex="-1"></canvas>
      <div id="unity-warning"></div>
    </div>

    <script src="Build/V5_WebGL.loader.js"></script>
    <script>
      const container = document.getElementById('unity-container');
      const canvas    = document.getElementById('unity-canvas');
      const warning   = document.getElementById('unity-warning');

      // (Optional) einfache Banner-Funktion wie in Datei #1
      function unityShowBanner(msg, type) {
        if (!warning) return;
        const div = document.createElement('div');
        div.innerHTML = msg;
        div.style.padding = '10px';
        div.style.borderRadius = '6px';
        if (type === 'error') { div.style.background = 'red'; div.style.color = 'white'; }
        else { div.style.background = 'yellow'; }
        warning.appendChild(div);
        warning.style.display = 'block';
        if (type !== 'error') setTimeout(() => {
          if (div.parentNode) warning.removeChild(div);
          warning.style.display = warning.children.length ? 'block' : 'none';
        }, 5000);
      }

      // Canvas vollflächig + Device Pixel Ratio berücksichtigen
      let unityInstance = null;
      function resizeCanvas() {
        const w = Math.max(0, window.innerWidth);
        const h = Math.max(0, window.innerHeight);
        canvas.style.width  = w + 'px';
        canvas.style.height = h + 'px';

        const dpr = window.devicePixelRatio || 1;
        const pw  = Math.floor(w * dpr);
        const ph  = Math.floor(h * dpr);

        if (canvas.width !== pw || canvas.height !== ph) {
          canvas.width  = pw;
          canvas.height = ph;
          if (unityInstance && unityInstance.Module && unityInstance.Module.setCanvasSize) {
            unityInstance.Module.setCanvasSize(pw, ph, true);
          }
        }
      }
      window.addEventListener('resize', resizeCanvas);

      // Mobile-Klassen nicht nötig; Viewport-Meta ist schon gesetzt

      // Unity starten
      createUnityInstance(canvas, {
        dataUrl: "Build/V5_WebGL.data",
        frameworkUrl: "Build/V5_WebGL.framework.js",
        codeUrl: "Build/V5_WebGL.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Bockito Games",
        productName: "KeyUcation Generator",
        productVersion: "0.1",
        showBanner: unityShowBanner,
        devicePixelRatio: window.devicePixelRatio || 1
        // matchWebGLToCanvasSize: false, // falls du DOM- und Rendergröße trennen willst
      }).then((instance) => {
        unityInstance = instance;
        resizeCanvas(); // nach Init sicherstellen
      }).catch((message) => {
        alert(message);
      });

      // erste Größenanpassung sofort
      resizeCanvas();
    </script>
  </body>
</html>
